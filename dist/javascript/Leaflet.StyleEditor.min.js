var leafletstyleeditor=function(t){var e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=13)}([function(t,e){t.exports=void 0},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(2));e.default=class{constructor(){this.util=l.default.getInstance()}create(t){this.options.uiElement=s.default.DomUtil.create("div","leaflet-styleeditor-uiElement",t),this.createTitle(),this.createContent()}createTitle(){s.default.DomUtil.create("label","leaflet-styleeditor-label",this.options.uiElement).innerHTML=this.options.title+":"}createContent(){}show(t){this.style(t),this.showForm()}showForm(){this.util.showElement(this.options.uiElement)}hide(){this.util.hideElement(this.options.uiElement)}style(t){}lostFocus(){}setStyle(t){let e=this.util.getCurrentElement(),i=s.default.Layer[e];e instanceof s.default.LayerGroup&&(i=e.getLayers);for(let e=0;e<i.length;e++){let o=i[e];if(o instanceof s.default.Marker);else{let e={};e[this.options.styleOption]=t,o.setStyle(e),o.options[this.options.styleOption]=t}this.util.fireChangeEvent(o)}this.options.parentForm.style()}}},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0));class l{constructor(t){this.styleEditor=t}static createInstance(t){l.instance=new l(t)}static getInstance(){return l.instance}fireEvent(t,e){this.styleEditor.map.fireEvent(this.styleEditor.options.styleEditorEventPrefix+t,e)}fireChangeEvent(t){this.fireEvent("changed",t)}hideElement(t){t&&s.default.DomUtil.addClass(t,"leaflet-styleeditor-hidden")}rgbToHex(t,e=!1){if(t||0!==(t=this.styleEditor.options.defaultColor).indexOf("#")&&(t="#"+t),0===t.indexOf("#"))return e&&t.replace("#",""),t;if(t.indexOf("(")<0)return"#"+t;let i=t.substring(4).replace(")","").split(","),o=this._componentToHex(parseInt(i[0],10))+this._componentToHex(parseInt(i[1],10))+this._componentToHex(parseInt(i[2],10));return e?o:"#"+o}getCurrentElement(){return this.styleEditor.currentElement?void 0!==this.styleEditor.currentElement.target?this.styleEditor.currentElement.target:this.styleEditor.currentElement:null}setCurrentElement(t){this.styleEditor.currentElement.target=t}fillCurrentElement(){return this.getCurrentElement().options.fill}getStyle(t){let e=this.getCurrentElement().options[t];return e||null}setStyle(t,e){let i=this.getCurrentElement();if(i instanceof s.default.Marker)this.styleEditor.options.markerType.setStyle(i,t,e);else{let o={};o[t]=e,i.setStyle(o)}this.fireChangeEvent(i)}showElement(t){t&&s.default.DomUtil.removeClass(t,"leaflet-styleeditor-hidden")}_componentToHex(t){let e=t.toString(16);return 1===e.length?"0"+e:e}getMarkersForColor(t){t=this.rgbToHex(t);let e=this.styleEditor.options.markerType.options.markers,i=this.styleEditor.options.markers;if(Array.isArray(e)||(e=Object.keys(e).includes(t)?e[t]:e.default),null!==i){if(!Array.isArray(i)){let o=Object.keys(i);i=o.includes(t)?i[t]:o.includes("default")?i.default:e}return e.filter(t=>i.includes(t))}return e}getDefaultMarkerForColor(t){t=this.rgbToHex(t);let e=this.getMarkersForColor(t),i=[],o=this.styleEditor.options.defaultMarkerIcon;return null!==o&&("string"==typeof o&&i.push(o),Object.keys(o).includes(t)&&i.push(o[t])),o=this.styleEditor.options.markerType.options.defaultMarkerIcon,void 0!==o&&("string"==typeof o&&i.push(o),Object.keys(o).includes(t)&&i.push(o[t])),i.filter(t=>e.includes(t)),i.length>0?i[0]:e[0]}}e.default=l},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=i(15);e.IconOptions=o.IconOptions;const s=i(16);e.Size=s.Size},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(6));e.Form=s.default;const l=o(i(19));e.GeometryForm=l.default;const r=o(i(20));e.MarkerForm=r.default},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(2));e.FormOptions=class{};e.default=class{constructor(){this.util=s.default.getInstance()}create(t){this.options.parentUiElement=t;let e=this.getFormElements(),i=Object.keys(e);for(let e=0;e<i.length;e++){let o=this.getFormElementClass(i[e]);void 0!==o&&(o.create(t),this.options.initializedElements.push(o))}}hide(){this.hideFormElements(),this.hideForm()}hideFormElements(){for(let t=0;t<this.options.initializedElements.length;t++)this.options.initializedElements[t].hide()}hideForm(){this.util.hideElement(this.options.parentUiElement)}show(){this.preShow(),this.showFormElements(),this.showForm(),this.style()}preShow(){}showFormElements(){for(let t=0;t<this.options.initializedElements.length;t++)this.showFormElement(this.options.initializedElements[t])}showForm(){this.util.showElement(this.options.parentUiElement)}style(){for(let t=0;t<this.options.initializedElements.length;t++)this.options.initializedElements[t].style()}lostFocus(){for(let t=0;t<this.options.initializedElements.length;t++)this.options.initializedElements[t].lostFocus()}showFormElement(t){this.showFormElementForStyleOption(t.options.styleOption)?t.show():t.hide()}getFormElements(){let t;return t=this.options.formElements,t}getFormElementClass(t){let e=this.getFormElements();if(Object.keys(e).indexOf(t)>=0){let i=e[t];if(i){if("boolean"==typeof i)return this.getFormElementStandardClass(t);"formElement"in i&&"boolean"in i&&(i=i.formElement);try{let e=new i({styleOption:t,parentForm:this});if(e instanceof i)return e}catch(t){}}return this.getFormElementStandardClass(t)}}showFormElementForStyleOption(t){let e=this.getFormElements();if(t in e){let i=e[t];if("function"==typeof i)try{return i(this.util.getCurrentElement())}catch(t){return!0}return"boolean"==typeof i?i:!("boolean"in i)||("function"==typeof i.boolean?i.boolean(this.util.getCurrentElement()):i.boolean)}return!1}getFormElementStandardClass(t){return new this.options.formElements[t]({styleOption:t,parentForm:this})}}},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(1));class r extends l.default{createContent(){this.options.colorPickerDiv=s.default.DomUtil.create("div","leaflet-styleeditor-colorpicker",this.options.uiElement),this._getColorRamp().forEach(this._setSelectCallback,this)}_getColorRamp(){return this.options.colorRamp}_setSelectCallback(t){let e=s.default.DomUtil.create("div","leaflet-styleeditor-color",this.options.colorPickerDiv);e.style.backgroundColor=t,s.default.DomEvent.addListener(e,"click",this._selectColor,this)}_selectColor(t){t.stopPropagation(),this.setStyle(this.util.rgbToHex(t.target.style.backgroundColor)),t.target,s.default.Marker}}e.default=r},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(1));class r extends l.default{createContent(){let t=this.options.uiElement,e=s.default.DomUtil.create("div","leaflet-styleeditor-stroke",t);e.style.backgroundPosition="0px -75px",s.default.DomEvent.addListener(e,"click",(function(){this.setStyle("1")}),this),e=s.default.DomUtil.create("div","leaflet-styleeditor-stroke",t),e.style.backgroundPosition="0px -95px",s.default.DomEvent.addListener(e,"click",(function(){this.setStyle("10, 10")}),this),e=s.default.DomUtil.create("div","leaflet-styleeditor-stroke",t),e.style.backgroundPosition="0px -115px",s.default.DomEvent.addListener(e,"click",(function(){this.setStyle("15, 10, 1, 10")}),this)}}e.default=r},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(1));class r extends l.default{createContent(){this.options.label=s.default.DomUtil.create("span","leaflet-styleeditor-input-span",this.options.uiElement);let t=s.default.DomUtil.create("input","leaflet-styleeditor-input",this.options.uiElement);t.type="range",t.max=String(1),t.min=String(0),t.step=String(.01),t.value=String(.5),s.default.DomEvent.addListener(t,"change",this._setStyle,this),s.default.DomEvent.addListener(t,"input",this._setStyle,this),s.default.DomEvent.addListener(t,"keyup",this._setStyle,this),s.default.DomEvent.addListener(t,"mouseup",this._setStyle,this)}style(){this.options.slider.value=this.util.getStyle(this.options.styleOption),this.options.label.innerText=100*parseInt(this.options.slider.value)+"%"}_setStyle(){this.setStyle(this.options.slider.value)}}e.default=r},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(1));class r extends l.default{createContent(){let t=this.options.uiElement,e=this.options.descTextAreaField=s.default.DomUtil.create("textarea","leaflet-styleeditor-input",t);s.default.DomEvent.addListener(e,"change",this._setStyle,this)}style(){let t=this.util.getCurrentElement();t&&t.options&&(this.options.descTextAreaField.value=t.options.popupContent||"")}_setStyle(){let t=this.util.getCurrentElement(),e=this.options.descTextAreaField.value,i=[t];t instanceof s.default.LayerGroup&&(i=t.getLayers());for(let t=0;t<i.length;t++){let o=i[t];if(o&&o.getPopup&&o.bindPopup){let t=o.getPopup();t?t.setContent(e):o.bindPopup(e)}}this.setStyle(e)}}e.default=r},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(1));class r extends l.default{createContent(){this.options.label=s.default.DomUtil.create("span","leaflet-styleeditor-input-span",this.options.uiElement);let t=s.default.DomUtil.create("input","leaflet-styleeditor-input",this.options.uiElement);t.type="range",t.min=String(0),t.max=String(20),t.step=String(1),t.value=String(4),this.options.weight=t,s.default.DomEvent.addListener(t,"change",this._setStyle,this),s.default.DomEvent.addListener(t,"input",this._setStyle,this),s.default.DomEvent.addListener(t,"keyup",this._setStyle,this),s.default.DomEvent.addListener(t,"mouseup",this._setStyle,this)}style(){this.options.weight.value=this.util.getStyle(this.options.styleOption),this.options.label.innerText=this.options.weight.value}_setStyle(){this.setStyle(this.options.weight.value)}}e.default=r},function(t,e,i){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=o(i(0)),r=s(i(2)),n=i(14),a=i(24),d=s(i(26));class c extends l.Control{constructor(t=u){super(),this.util=r.default.getInstance(),this.styleEditor=new a.StyleEditor,this.options=t}onAdd(t){return this.styleEditor.map=t,this.createUi()}fireEvent(t,e){this.util.fireEvent(t,e)}createUi(){return this.controlDiv=l.default.DomUtil.create("div","leaflet-control-styleeditor leaflet-control leaflet-bar"),this.controlUI=l.default.DomUtil.create("a","leaflet-control-styleeditor-interior",this.controlDiv),this.controlUI.title="Style Editor",this.cancelUI=l.default.DomUtil.create("div","leaflet-control-styleeditor-cancel leaflet-styleeditor-hidden",this.controlDiv),this.cancelUI.innerHTML=this.styleEditor.options.strings.cancel,this.cancelUI.title=this.styleEditor.options.strings.cancelTitle,this.styleEditorDiv=l.default.DomUtil.create("div","leaflet-styleeditor",this.styleEditor.map.getContainer),this.styleEditorHeader=l.default.DomUtil.create("div","leaflet-styleeditor-header",this.styleEditorDiv),this.styleEditorInterior=l.default.DomUtil.create("div","leaflet-styleeditor-interior",this.styleEditorDiv),this.addDomEvents(),this.addEventListeners(),this.addButtons(),this.styleForm=new d.default({styleEditorDiv:this.styleEditorDiv,styleEditorInterior:this.styleEditorInterior}),this.controlDiv}addDomEvents(){l.default.DomEvent.disableScrollPropagation(this.styleEditorDiv),l.default.DomEvent.disableScrollPropagation(this.controlDiv),l.default.DomEvent.disableScrollPropagation(this.cancelUI),l.default.DomEvent.disableClickPropagation(this.styleEditorDiv),l.default.DomEvent.disableClickPropagation(this.controlDiv),l.default.DomEvent.disableClickPropagation(this.cancelUI),l.default.DomEvent.on(this.controlDiv,"click",(function(){this.toggle()}),this)}addEventListeners(){this.addLeafletDrawEvents(),this.addLeafletEditableEvents()}addLeafletDrawEvents(){this.options.openOnLeafletDraw&&l.default.Control.Draw&&(this.styleEditor.map.on("layeradd",this.onLayerAdd,this),this.styleEditor.map.on(l.default.Draw.Event.CREATED,this.onLayerCreated,this))}addLeafletEditableEvents(){this.options.openOnLeafletEditable&&l.default.Editable&&(this.styleEditor.map.on("layeradd",this.onLayerAdd,this),this.styleEditor.map.on("editable:created",this.onLayerCreated,this))}onLayerCreated(t){this.removeIndicators(),this.styleEditor.currentElement=t.layer}onLayerAdd(t){this.styleEditor.currentElement&&t.layer===this.util.getCurrentElement()&&this.enable(t.layer)}onRemove(){this.disable(),this.removeDomEvents(),this.removeEventListeners(),l.default.DomUtil.remove(this.styleEditorDiv),l.default.DomUtil.remove(this.cancelUI),delete this.styleEditorDiv,delete this.cancelUI}removeEventListeners(){this.styleEditor.map.off("layeradd",this.onLayerAdd),l.default.Draw&&this.styleEditor.map.off(l.default.Draw.Event.CREATED,this.onLayerCreated),l.default.Editable&&this.styleEditor.map.off("editable:created",this.onLayerCreated)}removeDomEvents(){l.default.DomEvent.off(this.controlDiv,"click",(function(){this.toggle()}),this)}addButtons(){let t=l.default.DomUtil.create("button","leaflet-styleeditor-button styleeditor-nextBtn",this.styleEditorHeader);t.title=this.options.strings.tooltipNext,l.default.DomEvent.on(t,"click",(function(t){this.hideEditor(),l.default.DomUtil.hasClass(this.controlUI,"enabled")&&this.createTooltip(),t.stopPropagation()}),this)}toggle(){l.default.DomUtil.hasClass(this.controlUI,"enabled")?this.disable():this.enable()}enable(t){this._layerIsIgnored(t)||(l.default.DomUtil.addClass(this.controlUI,"enabled"),this.styleEditor.map.eachLayer(this.addEditClickEvents,this),this.showCancelButton(),this.createTooltip(),void 0!==t&&(this.isEnabled()&&this.removeIndicators(),this.initChangeStyle({target:t})))}isEnabled(){return l.default.DomUtil.hasClass(this.controlUI,"enabled")}disable(){this.isEnabled()&&(this.editLayers.forEach(this.removeEditClickEvents,this),this.editLayers=[],this.layerGroups=[],this.hideEditor(),this.hideCancelButton(),this.removeTooltip(),l.default.DomUtil.removeClass(this.controlUI,"enabled"))}addEditClickEvents(t){if(!this._layerIsIgnored(t))if(this.options.useGrouping&&t instanceof l.default.LayerGroup)this.layerGroups.push(t);else if(t instanceof l.default.Marker||t instanceof l.default.Path){let e=t.on("click",this.initChangeStyle,this);this.editLayers.push(e)}}removeEditClickEvents(t){t.off("click",this.initChangeStyle,this)}addIndicators(){if(!this.styleEditor.currentElement)return;let t=this.styleEditor.currentElement.target;t instanceof l.default.LayerGroup?t.eachLayer((function(t){t instanceof l.default.Marker&&t.getElement()&&l.default.DomUtil.addClass(t.getElement(),"leaflet-styleeditor-marker-selected")})):t instanceof l.default.Marker&&t.getElement()&&l.default.DomUtil.addClass(t.getElement(),"leaflet-styleeditor-marker-selected")}removeIndicators(){if(!this.styleEditor.currentElement)return;let t=this.util.getCurrentElement();t instanceof l.default.LayerGroup?t.eachLayer((function(t){const e=t;e.getElement()&&l.default.DomUtil.removeClass(e.getElement(),"leaflet-styleeditor-marker-selected")})):t.getElement()&&l.default.DomUtil.removeClass(t.getElement(),"leaflet-styleeditor-marker-selected")}hideEditor(){l.default.DomUtil.hasClass(this.styleEditorDiv,"editor-enabled")&&(this.removeIndicators(),l.default.DomUtil.removeClass(this.styleEditorDiv,"editor-enabled"),this.fireEvent("hidden"))}hideCancelButton(){l.default.DomUtil.addClass(this.cancelUI,"leaflet-styleeditor-hidden")}showEditor(){let t=this.styleEditorDiv;l.default.DomUtil.hasClass(t,"editor-enabled")||(l.default.DomUtil.addClass(t,"editor-enabled"),this.fireEvent("visible"))}showCancelButton(){l.default.DomUtil.removeClass(this.cancelUI,"leaflet-styleeditor-hidden")}initChangeStyle(t){this.removeIndicators(),this.styleEditor.currentElement=this.options.useGrouping?this.getMatchingElement(t):t,this.addIndicators(),this.showEditor(),this.removeTooltip();let e=t;e instanceof l.default.Layer||(e=t.target),this.fireEvent("editing",e),e instanceof l.default.Marker?(this.options.markerType.resetIconOptions(e),this.showMarkerForm(e)):this.showGeometryForm(e)}showGeometryForm(t){this.fireEvent("geometry",t),this.styleForm.showGeometryForm()}showMarkerForm(t){this.fireEvent("marker",t),this.styleForm.showMarkerForm()}createTooltip(){this.options.showTooltip&&(this.tooltipWrapper||(this.tooltipWrapper=l.default.DomUtil.create("div","leaflet-styleeditor-tooltip-wrapper",this.styleEditor.map.getContainer())),this.tooltip||(this.tooltip=l.default.DomUtil.create("div","leaflet-styleeditor-tooltip",this.tooltipWrapper)),this.tooltip.innerHTML=this.options.strings.tooltip)}getMatchingElement(t){let e=null,i=t.target;for(let t=0;t<this.layerGroups.length;++t)if(e=this.layerGroups[t],e&&i!==e&&e.hasLayer(i))return e.options&&e.options.opacity||(e.options=i.options,i.setIcon&&(e.setIcon=function(t){e.eachLayer((function(e){e instanceof l.default.Marker&&e.setIcon(t)}))})),this.getMatchingElement({target:e});return t}removeTooltip(){this.tooltip&&this.tooltip.parentNode&&(this.tooltip.remove(),this.tooltip=void 0)}_layerIsIgnored(t){return void 0!==t&&this.options.ignoreLayerTypes.some(e=>t.styleEditor&&t.styleEditor.type.toUpperCase()===e.toUpperCase())}}e.StyleEditorControl=c;const u={position:"topleft",colorRamp:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],defaultColor:null,markers:null,defaultMarkerIcon:null,defaultMarkerColor:null,ignoreLayerTypes:[],openOnLeafletDraw:!0,openOnLeafletEditable:!0,showTooltip:!0,strings:{cancel:"Cancel",cancelTitle:"Cancel Styling",tooltip:"Click on the element you want to style",tooltipNext:"Choose another element you want to style"},useGrouping:!0,forms:{},styleEditorEventPrefix:"styleeditor:",markerType:new n.DefaultMarker}},function(t,e,i){"use strict";i.r(e);i(0);var o=i(12);L.Marker.include({styleEditor:{type:"Marker"}}),L.Polygon.include({styleEditor:{type:"Polygon"}}),L.Polyline.include({styleEditor:{type:"Polyline"}}),L.Rectangle.include({styleEditor:{type:"Rectangle"}}),L.Control.StyleEditor=o.StyleEditorControl,L.control.styleEditor=function(t){return t||(t={}),new L.Control.StyleEditor(t)},e.default=L},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=i(18),r=i(4);class n extends l.Marker{constructor(){super()}createMarkerIcon(t,e){e||(e="");let i=t.iconSize;return new s.default.Icon({iconUrl:this._getMarkerUrlForStyle(t),iconSize:t.iconSize.dimen,iconColor:t.iconColor,icon:t.icon,className:e,iconAnchor:[i[0]/2,i[1]/2],popupAnchor:[0,-i[1]/2]})}createSelectHTML(t,e,i){let o=new r.IconOptions(r.Size.Small,i,e.iconColor);t.innerHTML=this.createMarkerIcon(o,this.options.selectIconClass).createIcon().outerHTML}_getMarkerUrlForStyle(t){return this._getMarkerUrl(t.iconSize,t.iconColor,t.icon)}_getMarkerUrl(t,e,i){e=0===e.indexOf("#")?e.replace("#",""):this.util.rgbToHex(e,!0);let o="https://api.tiles.mapbox.com/v3/marker/pin-"+t.name;return i&&(o+="-"+i),o+"+"+e+".png"}}e.DefaultMarker=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.IconOptions=class{constructor(t,e,i){this.iconSize=t,this.icon=e,this.iconColor=i}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class o{constructor(t,e){this.name=t,this.dimen=e}}e.Size=o,o.Small=new o("small",[20,50]),o.Medium=new o("medium",[30,70]),o.Large=new o("large",[35,90])},,function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=i(5),r=o(i(2)),n=i(4);e.Marker=class{constructor(){this.util=r.default.getInstance(),this.markerForm=new l.MarkerForm,""===this.options.selectIconClass||this.options.selectIconClass.startsWith("leaflet-styleeditor-select-image")||(this.options.selectIconClass="leaflet-styleeditor-select-image-"+this.options.selectIconClass)}setNewMarker(t){let e=this._createMarkerIcon(t);(t=t.target).setIcon(e),t instanceof s.default.LayerGroup?t.eachLayer((function(t){const e=t;s.default.DomUtil.addClass(e.getElement(),"leaflet-styleeditor-marker-selected")})):s.default.DomUtil.addClass(t.getElement(),"leaflet-styleeditor-marker-selected")}setStyle(t,e,i){"icon"!==e&&(e="icon"+e.charAt(0).toUpperCase()+e.slice(1)),this.setIconOptions(t,e,i),this.setNewMarker(t)}createSelectHTML(t,e,i){}getIconOptions(t){try{this.options.iconOptions=t.target.options.icon.options}catch(t){}return Object.keys(this.options.iconOptions).length>0?this.options.iconOptions:(this.options.iconOptions.iconColor=this._getDefaultMarkerColor(),this.options.iconOptions.iconSize=n.Size.Small,this.options.iconOptions.icon=this.util.getDefaultMarkerForColor(this.options.iconOptions.iconColor),this.options.iconOptions=this._ensureMarkerIcon(this.options.iconOptions),this.options.iconOptions)}resetIconOptions(t){Object.keys(this.getIconOptions(t)).forEach(e=>this.setStyle(t,e,this.options.iconOptions[e]))}setIconOptions(t,e,i){this.getIconOptions(t)[e]=i}_createMarkerIcon(t){let e=this.getIconOptions(t);return this.createMarkerIcon(e)}createMarkerIcon(t,e){}_ensureMarkerIcon(t){return this.util.getMarkersForColor(t.iconColor).includes(t.icon)?t:(t.icon=this.util.getDefaultMarkerForColor(t.iconColor),t)}_getDefaultMarkerColor(){let t=this.options.colorRamp,e=["#000"],i=[];null!=t?(i=t.filter(t=>e.includes(t)),0===i.length&&(i=t)):i=e;let o="#000";return null!==o&&i.includes(o)&&(o=null),null===o&&(o="#000",null===o||i.includes(o)||(o=null),null===o&&(o=i[0])),this.util.rgbToHex(o)}}},function(t,e,i){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(0);const l=o(i(6)),r=s(i(7)),n=s(i(8)),a=s(i(9)),d=s(i(10)),c=s(i(11));class u extends l.FormOptions{constructor(){super(),this.formOptionKey="geometry",this.formElements={color:new r.default,opacity:new a.default,weight:new c.default,dashArray:new n.default,fillColor:new r.default,fillOpacity:new a.default,popupContent:new d.default}}}class h extends l.default{constructor(){super(...arguments),this.options=new u}showFormElements(){for(let t=0;t<this.options.initializedElements.length;t++)0===this.options.initializedElements[t].options.styleOption.indexOf("fill")?this.util.fillCurrentElement()?this.showFormElement(this.options.initializedElements[t]):this.options.initializedElements[t].hide():this.showFormElement(this.options.initializedElements[t])}}e.default=h},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(5),l=o(i(22)),r=o(i(7)),n=o(i(23)),a=o(i(10));class d extends s.Form{constructor(){super(...arguments),this.formOptionKey="marker",this.formElements={icon:new l.default,color:new r.default,size:new n.default,popupContent:new a.default}}}e.default=d},,function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(1));class r extends l.default{constructor(){super(...arguments),this._selectOptionWrapperClasses="leaflet-styleeditor-select-option-wrapper leaflet-styleeditor-hidden",this._selectOptionClasses="leaflet-styleeditor-select-option"}createContent(){let t=this.options.uiElement,e=s.default.DomUtil.create("div","leaflet-styleeditor-select",t);this.options.selectBoxImage=this._createSelectInputImage(e),s.default.DomEvent.addListener(e,"click",this._toggleSelectInput,this)}style(t){let e=this.options.markerType.getIconOptions(t);this._styleSelectInputImage(t,this.options.selectBoxImage,e.icon,e.iconColor),this._createColorSelect(this.options.markerType.options.iconOptions.iconColor),this._hideSelectOptions()}lostFocus(){this._hideSelectOptions()}_createSelectInputImage(t){let e=s.default.DomUtil.create("div","leaflet-styleeditor-select-image-wrapper",t);return s.default.DomUtil.create("div","leaflet-styleeditor-select-image",e)}_styleSelectInputImage(t,e,i,o){if(!i&&!(i=e.getAttribute("value")))return;let s=this.options.markerType.getIconOptions(t);o&&(s.iconColor=o),e.innerHTML="",this.options.markerType.createSelectHTML(e,s,i),e.setAttribute("value",i)}_createColorSelect(t){if(this.options.selectOptions||(this.options.selectOptions={}),t in this.options.selectOptions)return;let e=this.options.uiElement,i=s.default.DomUtil.create("ul",this._selectOptionWrapperClasses,e);this.util.getMarkersForColor(t).forEach((function(e){let o=s.default.DomUtil.create("li",this._selectOptionClasses,i),l=this._createSelectInputImage(o);this._styleSelectInputImage(l,e,t)}),this),this.options.selectOptions[t]=i,s.default.DomEvent.addListener(i,"click",(function(t){t.stopPropagation();let e=t.target;if("UL"!==e.nodeName){if("leaflet-styleeditor-select-image"===e.parentElement.className)e=e.parentElement;else for(;e&&"leaflet-styleeditor-select-image"!==e.className;)e=e.children[0];this._selectMarker({target:e},this)}}),this)}_toggleSelectInput(t){let e=this._getCurrentColorElement(this.util.rgbToHex(this.options.markerType.options.iconOptions.iconColor)),i=!1;e&&(i=s.default.DomUtil.hasClass(e,"leaflet-styleeditor-hidden")),this._hideSelectOptions(),i&&this.util.showElement(e)}_selectMarker(t){let e=this._getValue(t.target);this.options.selectBoxImage.setAttribute("value",e),this.setStyle(e),this._hideSelectOptions()}_getValue(t){return t.getAttribute("value")}_getCurrentColorElement(t){return this.options.selectOptions[t]||this._createColorSelect(t),this.options.selectOptions[t]}_hideSelectOptions(){for(let t in this.options.selectOptions)this.util.hideElement(this.options.selectOptions[t])}}e.default=r},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(1));class r extends l.default{createContent(){let t=this.options.uiElement,e=s.default.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-small",t);s.default.DomEvent.addListener(e,"click",(function(){this.setStyle(this.options.styleEditorOptions.markerType.options.size.small)}),this),e=s.default.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-medium",t),s.default.DomEvent.addListener(e,"click",(function(){this.setStyle(this.options.styleEditorOptions.markerType.options.size.medium)}),this),e=s.default.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-large",t),s.default.DomEvent.addListener(e,"click",(function(){this.setStyle(this.options.styleEditorOptions.markerType.options.size.large)}),this)}}e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=i(5);i(25);e.StyleEditor=class{constructor(t){this.currentElement=null,this._editLayers=[],this._layerGroups=[],this.markerForm=new o.MarkerForm,this.geometryForm=new o.GeometryForm,this.options=t}}},function(t,e,i){},function(t,e,i){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(i(0)),l=o(i(2));e.default=class{constructor(t){this.util=l.default.getInstance(),this.options=t,this.createMarkerForm(),this.createGeometryForm(),this.addDOMEvents()}addDOMEvents(){s.default.DomEvent.addListener(this.styleEditor.map,"click",this.lostFocus,this),s.default.DomEvent.addListener(this.options.styleEditorDiv,"click",this.lostFocus,this)}clearForm(){this.styleEditor.markerForm.hide(),this.styleEditor.geometryForm.hide()}createMarkerForm(){let t=s.default.DomUtil.create("div","leaflet-styleeditor-interior-marker",this.options.styleEditorInterior);this.styleEditor.markerForm.create(t)}createGeometryForm(){let t=s.default.DomUtil.create("div","leaflet-styleeditor-interior-geometry",this.options.styleEditorInterior);this.styleEditor.geometryForm.create(t)}showMarkerForm(){this.clearForm(),this.styleEditor.markerForm.show()}showGeometryForm(){this.clearForm(),this.styleEditor.geometryForm.show()}fireChangeEvent(t){this.util.fireChangeEvent(t)}lostFocus(t){let e=t.target;for(let t=0;t<10&&e;t++){if(e.className&&s.default.DomUtil.hasClass(e,"leaflet-styleeditor-interior"))return;e=e.parentNode}this.styleEditor.markerForm.lostFocus(),this.styleEditor.geometryForm.lostFocus()}}}]);
//# sourceMappingURL=Leaflet.StyleEditor.min.js.map